# CKA 2025 ì‹¤ì „ ì‹œí—˜ íŒ¨í„´

## ğŸ¯ 2025ë…„ ì‹¤ì œ ì¶œì œ íŒ¨í„´ ê¸°ë°˜ ë¬¸ì œì§‘

**ì‚¬ìš©ë²•:**
1. **KillerCoda Kubernetes Playground** ì ‘ì†: https://killercoda.com/playgrounds/scenario/kubernetes
2. ê° ë¬¸ì œì˜ **í™˜ê²½ ì„¤ì •** ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë¬¸ì œ ìƒí™© ìƒì„±
3. **ë¬¸ì œ**ë¥¼ ì½ê³  í•´ê²° ì‹œë„
4. **ì†”ë£¨ì…˜**ì„ ì°¸ê³ í•˜ì—¬ ê²€ì¦

---

## ğŸ“‹ ì‹¤ì œ ì‹œí—˜ ì¶œì œ íŒ¨í„´ (ê°€ì¤‘ì¹˜ë³„)

### ğŸ”¥ ê³ ë¹ˆë„ ì¶œì œ ì˜ì—­ (70% ì´ìƒ)

#### 1. HPA ê³ ê¸‰ ì„¤ì • (ê°€ì¤‘ì¹˜: 8%)

**ë¬¸ì œ:** `auto-scale` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— `apache-server`ë¼ëŠ” ì´ë¦„ì˜ HPAë¥¼ ìƒì„±í•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- CPU ì‚¬ìš©ë¥  50% ëª©í‘œ
- ìµœì†Œ 1ê°œ, ìµœëŒ€ 4ê°œ Pod
- ìŠ¤ì¼€ì¼ ë‹¤ìš´ ì•ˆì •í™” ì‹œê°„ 30ì´ˆ

**ì†”ë£¨ì…˜:**
```bash
# í™˜ê²½ ì„¤ì •
kubectl create namespace auto-scale
kubectl create deployment apache-server --image=nginx:1.21 -n auto-scale
kubectl patch deployment apache-server -n auto-scale -p '{"spec":{"template":{"spec":{"containers":[{"name":"nginx","resources":{"requests":{"cpu":"100m","memory":"128Mi"}}}]}}}}'

# HPA ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: apache-server
  namespace: auto-scale
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: apache-server
  minReplicas: 1
  maxReplicas: 4
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 30
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 50
EOF
```

---

#### 2. Deployment & NodePort êµ¬ì„± (ê°€ì¤‘ì¹˜: 10%)

**ë¬¸ì œ:** `spline-reticulator` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ê¸°ì¡´ deployment `front-end`ë¥¼ ì¬êµ¬ì„±í•˜ì—¬ nginx ì»¨í…Œì´ë„ˆì˜ 80/tcp í¬íŠ¸ë¥¼ ë…¸ì¶œí•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- ì»¨í…Œì´ë„ˆ í¬íŠ¸ 80/tcp ë…¸ì¶œ
- `front-end-svc`ë¼ëŠ” ì´ë¦„ì˜ ìƒˆ ì„œë¹„ìŠ¤ ìƒì„±
- NodePortë¥¼ í†µí•´ ê°œë³„ Pod ë…¸ì¶œ

**ì†”ë£¨ì…˜:**
```bash
# í™˜ê²½ ì„¤ì •
kubectl create namespace spline-reticulator
kubectl create deployment front-end --image=nginx:1.21 -n spline-reticulator

# Deployment í¸ì§‘í•˜ì—¬ containerPort ì¶”ê°€
kubectl patch deployment front-end -n spline-reticulator -p '{"spec":{"template":{"spec":{"containers":[{"name":"nginx","ports":[{"containerPort":80,"protocol":"TCP"}]}]}}}}'

# ì„œë¹„ìŠ¤ ìƒì„±
kubectl expose deployment front-end --name=front-end-svc --port=80 --target-port=80 -n spline-reticulator

# NodePortë¡œ ë³€ê²½
kubectl patch service front-end-svc -n spline-reticulator -p '{"spec": {"type": "NodePort"}}'
```

---

#### 3. Sidecar ì»¨í…Œì´ë„ˆ ì¶”ê°€ (ê°€ì¤‘ì¹˜: 8%)

**ë¬¸ì œ:** ê¸°ì¡´ deployment `synergy-leverager`ë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ `sidecar`ë¼ëŠ” ì´ë¦„ì˜ co-located ì»¨í…Œì´ë„ˆë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- Sidecar ì´ë¯¸ì§€: `busybox:stable`
- ì‹¤í–‰ ëª…ë ¹: `/bin/sh -c "tail -n+1 -f /var/log/synergy-leverager.log"`
- `/var/log`ì— ë§ˆìš´íŠ¸ëœ ë³¼ë¥¨ì„ í†µí•´ ë¡œê·¸ íŒŒì¼ ê³µìœ 

**ì†”ë£¨ì…˜:**
```bash
# ê¸°ì¡´ deployment ì‚­ì œ í›„ sidecarê°€ í¬í•¨ëœ ìƒˆ deployment ìƒì„±
kubectl delete deployment synergy-leverager --ignore-not-found

cat <<EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: synergy-leverager
  labels:
    app: synergy-leverager
spec:
  replicas: 1
  selector:
    matchLabels:
      app: synergy-leverager
  template:
    metadata:
      labels:
        app: synergy-leverager
    spec:
      containers:
      - name: nginx
        image: nginx:1.21
        command: 
        - sh
        - -c
        - |
          while true; do
            echo "\$(date): Application logging" >> /var/log/synergy-leverager.log
            sleep 5
          done &
          nginx -g 'daemon off;'
        volumeMounts:
        - name: data
          mountPath: /var/log
      - name: sidecar
        image: busybox:stable
        command: 
        - /bin/sh
        - -c
        - |
          while [ ! -f /var/log/synergy-leverager.log ]; do
            sleep 1
          done
          tail -n+1 -f /var/log/synergy-leverager.log
        volumeMounts:
        - name: data
          mountPath: /var/log
      volumes:
      - name: data
        emptyDir: {}
EOF
```

---

#### 4. CNI ì„¤ì¹˜ ë° êµ¬ì„± (ê°€ì¤‘ì¹˜: 10%)

**ë¬¸ì œ:** Native Network Policy ì§€ì›ì´ í•„ìš”í•œ CNIë¥¼ ì„¤ì¹˜í•˜ê³  ì„¤ì •í•˜ì„¸ìš”.

**ì„ íƒ ì˜µì…˜:**
- Flannel v0.26.1 (Network Policy ë¯¸ì§€ì›)
- Calico v3.28.2 (Network Policy ì§€ì›)

**ì†”ë£¨ì…˜:**
```bash
# Network Policy ì§€ì›ì´ í•„ìš”í•˜ë¯€ë¡œ Calico ì„ íƒ
kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.28.2/manifests/tigera-operator.yaml

# ì„¤ì¹˜ í™•ì¸
kubectl get pods -n calico-system
kubectl get pods -n tigera-operator

# Network Policy í…ŒìŠ¤íŠ¸
kubectl run test-pod1 --image=nginx:1.21 --labels="app=test1"
kubectl run test-pod2 --image=nginx:1.21 --labels="app=test2"

# ê¸°ë³¸ ì—°ê²° í…ŒìŠ¤íŠ¸
kubectl exec test-pod1 -- ping -c 2 $(kubectl get pod test-pod2 -o jsonpath='{.status.podIP}')

# Network Policy ìƒì„± ë° í…ŒìŠ¤íŠ¸
cat <<EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: test-netpol
spec:
  podSelector:
    matchLabels:
      app: test2
  policyTypes:
  - Ingress
  ingress: []
EOF

# ì°¨ë‹¨ëœ ì—°ê²° í…ŒìŠ¤íŠ¸
kubectl exec test-pod1 -- ping -c 2 $(kubectl get pod test-pod2 -o jsonpath='{.status.podIP}') || echo "Traffic blocked (expected)"
```

---

#### 5. ArgoCD Helm ì„¤ì¹˜ (ê°€ì¤‘ì¹˜: 7%)

**ë¬¸ì œ:** í´ëŸ¬ìŠ¤í„°ì— ArgoCDë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- ê³µì‹ Argo CD Helm repositoryë¥¼ `argo` ì´ë¦„ìœ¼ë¡œ ì¶”ê°€
- ArgoCD Helm Chart ë²„ì „ 7.7.3ì˜ í…œí”Œë¦¿ì„ `argocd` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ìš©ìœ¼ë¡œ ìƒì„±
- `~/argo-helm.yaml`ì— ì €ì¥
- CRD ì„¤ì¹˜ ë¹„í™œì„±í™”

**ì†”ë£¨ì…˜:**
```bash
# Helm repository ì¶”ê°€
helm repo add argo https://argoproj.github.io/argo-helm
helm repo update

# í…œí”Œë¦¿ ìƒì„± (CRD ì„¤ì¹˜ ë¹„í™œì„±í™”)
helm template argocd argo/argo-cd --version 7.7.3 -n argocd \
  --set crds.install=false > ~/argo-helm.yaml

# ìƒì„±ëœ í…œí”Œë¦¿ í™•ì¸
ls -la ~/argo-helm.yaml
grep -c "^kind:" ~/argo-helm.yaml
grep -i "CustomResourceDefinition" ~/argo-helm.yaml || echo "No CRDs found (expected)"

# ì ìš©
kubectl create namespace argocd
kubectl apply -f ~/argo-helm.yaml
```

---

### ğŸ”§ ì¤‘ë¹ˆë„ ì¶œì œ ì˜ì—­ (30-70%)

#### 6. PriorityClass êµ¬ì„± (ê°€ì¤‘ì¹˜: 7%)

**ë¬¸ì œ:** ì‚¬ìš©ì ì›Œí¬ë¡œë“œìš© `high-priority`ë¼ëŠ” ì´ë¦„ì˜ ìƒˆ PriorityClassë¥¼ ìƒì„±í•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- ê¸°ì¡´ ì‚¬ìš©ì ì •ì˜ ìš°ì„ ìˆœìœ„ í´ë˜ìŠ¤ ê°’ë³´ë‹¤ 1 ì‘ì€ ê°’
- `priority` ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ `busybox-logger` deploymentì— ì ìš©

**ì†”ë£¨ì…˜:**
```bash
# í™˜ê²½ ì„¤ì •
kubectl create namespace priority
kubectl create priorityclass existing-priority --value=1000 --description="Existing user priority class"
kubectl create deployment busybox-logger --image=busybox:1.35 --namespace=priority --replicas=2

# ìƒˆ PriorityClass ìƒì„±
kubectl create priorityclass high-priority --value=999 --description="High priority class for critical workloads"

# Deploymentì— ìš°ì„ ìˆœìœ„ í´ë˜ìŠ¤ ì ìš©
kubectl patch deployment busybox-logger -n priority -p '{"spec":{"template":{"spec":{"priorityClassName":"high-priority"}}}}'

# í™•ì¸
kubectl get pods -n priority -o custom-columns=NAME:.metadata.name,PRIORITY:.spec.priorityClassName,STATUS:.status.phase
```

---

#### 7. StorageClass ê¸°ë³¸ ì„¤ì • (ê°€ì¤‘ì¹˜: 8%)

**ë¬¸ì œ:** `local-path`ë¼ëŠ” ì´ë¦„ì˜ StorageClassë¥¼ ìƒì„±í•˜ê³  ê¸°ë³¸ StorageClassë¡œ ì„¤ì •í•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- Provisioner: `rancher.io/local-path`
- Volume Binding Mode: `WaitForFirstConsumer`
- ê¸°ë³¸ StorageClassë¡œ ì„¤ì •

**ì†”ë£¨ì…˜:**
```bash
# ê¸°ì¡´ ê¸°ë³¸ StorageClass ì œê±°
kubectl patch storageclass standard -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"false"}}}' || true

# ìƒˆ StorageClass ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: local-path
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: rancher.io/local-path
volumeBindingMode: WaitForFirstConsumer
reclaimPolicy: Delete
EOF

# í™•ì¸
kubectl get storageclass
kubectl describe storageclass local-path
```

---

#### 8. Gateway API ë§ˆì´ê·¸ë ˆì´ì…˜ (ê°€ì¤‘ì¹˜: 12%)

**ë¬¸ì œ:** ê¸°ì¡´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ Ingressì—ì„œ Gateway APIë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ì„¸ìš”.

**ìš”êµ¬ì‚¬í•­:**
- HTTPS ì ‘ê·¼ ìœ ì§€
- Gateway ì´ë¦„: `web-gateway`
- í˜¸ìŠ¤íŠ¸ëª…: `gateway.web.k8s.local`
- HTTPRoute ì´ë¦„: `web-route`

**ì†”ë£¨ì…˜:**
```bash
# Gateway API CRD ì„¤ì¹˜
kubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.1.0/standard-install.yaml

# í…ŒìŠ¤íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì„œë¹„ìŠ¤ ìƒì„±
kubectl create deployment web-app --image=nginx:1.21 --replicas=1
kubectl expose deployment web-app --name=web-service --port=80

# TLS ì¸ì¦ì„œ ìƒì„±
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout /tmp/tls.key -out /tmp/tls.crt \
  -subj "/CN=gateway.web.k8s.local"
kubectl create secret tls web-tls --cert=/tmp/tls.crt --key=/tmp/tls.key

# GatewayClass ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: gateway.networking.k8s.io/v1
kind: GatewayClass
metadata:
  name: nginx
spec:
  controllerName: "nginx.org/gateway-controller"
EOF

# Gateway ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: web-gateway
spec:
  gatewayClassName: nginx
  listeners:
  - name: https
    protocol: HTTPS
    port: 443
    hostname: gateway.web.k8s.local
    tls:
      mode: Terminate
      certificateRefs:
      - kind: Secret
        name: web-tls
EOF

# HTTPRoute ìƒì„±
cat <<EOF | kubectl apply -f -
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: web-route
spec:
  parentRefs:
  - name: web-gateway
  hostnames:
  - "gateway.web.k8s.local"
  rules:
  - matches:
    - path:
        type: PathPrefix
        value: /
    backendRefs:
    - name: web-service
      port: 80
EOF
```

---

### ğŸ“Š ì‹œí—˜ ëŒ€ë¹„ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### âœ… í•„ìˆ˜ ì•”ê¸° ì‚¬í•­

1. **ëª…ë ¹ì–´ íŒ¨í„´**
   - `kubectl create` vs `kubectl apply`
   - `kubectl patch` ì‚¬ìš©ë²•
   - `kubectl expose` ì˜µì…˜ë“¤

2. **YAML êµ¬ì¡°**
   - HPA behavior ì„¤ì •
   - NetworkPolicy ê·œì¹™
   - SecurityContext ì˜µì…˜ë“¤

3. **ë¬¸ì œ í•´ê²° ìˆœì„œ**
   - í™˜ê²½ ì„¤ì • â†’ ë¦¬ì†ŒìŠ¤ ìƒì„± â†’ í™•ì¸ â†’ í…ŒìŠ¤íŠ¸

#### ğŸ¯ ì‹œê°„ ê´€ë¦¬ ì „ëµ

- **ê³ ê°€ì¤‘ì¹˜ ë¬¸ì œ ìš°ì„ ** (8% ì´ìƒ)
- **ëª…ë ¹í˜• ëª…ë ¹ì–´ í™œìš©** (ë¹ ë¥¸ ìƒì„±)
- **YAML í…œí”Œë¦¿ ì¤€ë¹„** (ë³µì¡í•œ ë¦¬ì†ŒìŠ¤ìš©)
- **ê²€ì¦ ë‹¨ê³„ í•„ìˆ˜** (kubectl get, describe)

#### ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸** - ë¬¸ì œì—ì„œ ì§€ì •í•œ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚¬ìš©
2. **ë¦¬ì†ŒìŠ¤ ì´ë¦„ ì •í™•íˆ** - ë¬¸ì œì—ì„œ ìš”êµ¬í•œ ì •í™•í•œ ì´ë¦„ ì‚¬ìš©
3. **í¬íŠ¸ ë²ˆí˜¸ ì£¼ì˜** - containerPort vs port vs targetPort
4. **ë¼ë²¨ ì…€ë ‰í„° ì¼ì¹˜** - deploymentì™€ service ê°„ ë¼ë²¨ ì¼ì¹˜

---

**ğŸ‰ 2025 ì‹¤ì „ ì‹œí—˜ íŒ¨í„´ í•™ìŠµì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!**
**ì‹¤ì œ CKA ì‹œí—˜ì—ì„œ ìì‹  ìˆê²Œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤! ğŸš€**